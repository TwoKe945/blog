name: Deploy Blog

on:
  push:
    branches: [ master ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v2.3.1

      - name: Install and Build ğŸ”§
        run: |
          npm install
          npm run build

      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@4.1.3
        with:
          BRANCH: gh-pages
          FOLDER: docs/.vuepress/dist
          ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}
  # sync: #åŒæ­¥åˆ°giteeä»“åº“
  #   needs: deploy
  #   runs-on: ubuntu-latest
  #   steps:
  #     # åŒæ­¥åˆ°Gitee
  #     - name: Sync to Gitee
  #       uses: wearerequired/git-mirror-action@master
  #       env:
  #           # æ³¨æ„åœ¨ Settings->Secrets é…ç½® GITEE_RSA_PRIVATE_KEY
  #           SSH_PRIVATE_KEY: ${{ secrets.GITEE_RSA_PRIVATE_KEY }}
  #       with:
  #           # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ GitHub æºä»“åº“åœ°å€
  #           source-repo: "git@github.com:TwoKe945/blog.git"
  #           # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç›®æ ‡ä»“åº“åœ°å€
  #           destination-repo: "git@gitee.com:twoke/blog.git"
  # reload-pages:
  #   needs: sync
  #   runs-on: ubuntu-latest
  #   steps:
  #     - name: Build Gitee Pages
  #       uses: yanglbme/gitee-pages-action@master
  #       with:
  #           # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç”¨æˆ·å
  #           gitee-username: twoke
  #           # æ³¨æ„åœ¨ Settings->Secrets é…ç½® GITEE_PASSWORD
  #           gitee-password: ${{ secrets.GITEE_PASSWORD }}
  #           # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ä»“åº“
  #           gitee-repo: twoke/blog
  #           branch: master
  #           directory: src/.vuepress/dist
  #           https: true
